services:
  app:
    build: .
    ports:
      - "8501:8501"
    env_file:
      - .secrets
    # gitignored â€” never committed
    # Alternatively, pass keys inline:
    # environment:
    #   - OPENROUTER_API_KEY=your_key
    #   - MASSIVE_API_KEY=your_key

  test:
    build: .
    env_file:
      - .secrets
    command: ["pytest", "-v"]
    profiles:
      - test
      # only runs with: docker compose --profile test up
